



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A library for making composable state machines, and UIs driven by those state machines.">
      
      
        <link rel="canonical" href="https://square.github.io/workflow/RELEASING/">
      
      
        <meta name="author" content="Square, Inc.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/icon-square.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Releasing workflow - Workflow</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#ef5350">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../css/app.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-144488214-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="red" data-md-color-accent="pink">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#releasing-workflow" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://square.github.io/workflow/" title="Workflow" aria-label="Workflow" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../images/icon-square.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Workflow
            </span>
            <span class="md-header-nav__topic">
              
                Releasing workflow
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/square/workflow/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Workflow
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link md-tabs__link--active">
        Overview
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../userguide/concepts/" class="md-tabs__link">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../tutorial/" class="md-tabs__link">
          Tutorials & Samples
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../kotlin/api/workflow/" class="md-tabs__link">
          API Reference
        </a>
      
    </li>
  

      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://square.github.io/workflow/" title="Workflow" class="md-nav__button md-logo">
      
        <img alt="logo" src="../images/icon-square.png" width="48" height="48">
      
    </a>
    Workflow
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/square/workflow/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Workflow
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/concepts/" title="Core Concepts" class="md-nav__link">
      Core Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Workflow Core
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Workflow Core
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/core-workflow/" title="Workflow" class="md-nav__link">
      Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/core-worker/" title="Worker" class="md-nav__link">
      Worker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/core-patterns/" title="Patterns" class="md-nav__link">
      Patterns
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/ui-concepts/" title="Workflow UI" class="md-nav__link">
      Workflow UI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/testing-concepts/" title="Workflow Testing" class="md-nav__link">
      Workflow Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/motivation/" title="Motivation & Architectural Concepts" class="md-nav__link">
      Motivation & Architectural Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/comparison/" title="Comparison with other frameworks" class="md-nav__link">
      Comparison with other frameworks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../userguide/implementation/" title="Under the Hood: Implementation Notes" class="md-nav__link">
      Under the Hood: Implementation Notes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Tutorials & Samples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorials & Samples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/adding-workflow-to-a-project/" title="Adding Workflow to a project" class="md-nav__link">
      Adding Workflow to a project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/tooling/" title="Tooling" class="md-nav__link">
      Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/building-a-workflow/" title="Building a Workflow" class="md-nav__link">
      Building a Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/building-a-view-controller-from-screen/" title="Building a View Controller from a Screen" class="md-nav__link">
      Building a View Controller from a Screen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tutorial/using-a-workflow-for-ui/" title="Using a Workflow to Show UI" class="md-nav__link">
      Using a Workflow to Show UI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../code-recipes/" title="Code Recipes" class="md-nav__link">
      Code Recipes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../development-process/" title="Development Process" class="md-nav__link">
      Development Process
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      API Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        API Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../kotlin/api/workflow/" title="Kotlin" class="md-nav__link">
      Kotlin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Swift API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Swift API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../swift/api/Workflow/" title="Workflow" class="md-nav__link">
      Workflow 
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../swift/api/WorkflowUI/" title="WorkflowUI" class="md-nav__link">
      WorkflowUI 
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../swift/api/WorkflowTesting/" title="WorkflowTesting" class="md-nav__link">
      WorkflowTesting 
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CHANGELOG/" title="Change Log ⏏" class="md-nav__link">
      Change Log ⏏
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CODE_OF_CONDUCT/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#production-releases" class="md-nav__link">
    Production Releases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-the-documentation-website" class="md-nav__link">
    Deploying the documentation website
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-site-generators" class="md-nav__link">
    Setting up the site generators
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kotlin-dokka" class="md-nav__link">
    Kotlin: Dokka
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swift-sourcedocs" class="md-nav__link">
    Swift: Sourcedocs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mkdocs" class="md-nav__link">
    mkdocs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-the-website-to-production" class="md-nav__link">
    Deploying the website to production
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validating-markdown" class="md-nav__link">
    Validating Markdown
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kotlin-notes" class="md-nav__link">
    Kotlin Notes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    Development
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying" class="md-nav__link">
    Deploying
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snapshot-releases" class="md-nav__link">
    Snapshot Releases
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/square/workflow/edit/master/docs/RELEASING.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="releasing-workflow">Releasing workflow<a class="headerlink" href="#releasing-workflow" title="Permanent link">&para;</a></h1>
<h2 id="production-releases">Production Releases<a class="headerlink" href="#production-releases" title="Permanent link">&para;</a></h2>
<hr />
<p><strong><em>Before you begin:</em></strong> <em>Please make sure you are set up with 
<a href="https://guides.cocoapods.org/making/getting-setup-with-trunk.html"><code>pod trunk</code></a> and your CocoaPods
account is a contributor to both the Workflow and WorkflowUI pods. If you need to be added as a
contributor, please <a href="https://github.com/square/workflow/issues/new">open a ticket requesting access</a>,
and assign it to @bencochran or @aquageek.</em></p>
<hr />
<ol>
<li>
<p>Merge an update of <a href="../CHANGELOG/">the change log</a> with the changes since the last release.</p>
</li>
<li>
<p>Make sure you&rsquo;re on the <code>master</code> branch (or fix branch, e.g. <code>v0.1-fixes</code>).</p>
</li>
<li>
<p>Confirm that the kotlin build is green before committing any changes
   <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="o">(</span><span class="nb">cd</span> kotlin <span class="o">&amp;&amp;</span> ./gradlew build connectedCheck<span class="o">)</span>
</code></pre></div>
</td></tr></table></p>
</li>
<li>
<p>In <code>kotlin/gradle.properties</code>, remove the <code>-SNAPSHOT</code> prefix from the <code>VERSION_NAME</code> property.
   E.g. <code>VERSION_NAME=0.1.0</code></p>
</li>
<li>
<p>Create a commit and tag the commit with the version number:
   <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>git commit -am <span class="s2">&quot;Releasing v0.1.0.&quot;</span>
git tag v0.1.0
</code></pre></div>
</td></tr></table></p>
</li>
<li>
<p>Upload the kotlin artifacts:
   <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="o">(</span><span class="nb">cd</span> kotlin <span class="o">&amp;&amp;</span> ./gradlew clean build <span class="o">&amp;&amp;</span> ./gradlew uploadArchives --no-parallel --no-daemon<span class="o">)</span>
</code></pre></div>
</td></tr></table></p>
</li>
</ol>
<p>Disabling parallelism and daemon sharing is required by the vanniktech maven publish plugin.
   Without those, the artifacts will be split across multiple (invalid) staging repositories.</p>
<ol>
<li>
<p>Close and release the staging repository at <a href="https://oss.sonatype.org">https://oss.sonatype.org</a>.</p>
</li>
<li>
<p>Publish to CocoaPods:
    <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>bundle <span class="nb">exec</span> pod trunk push Workflow.podspec
bundle <span class="nb">exec</span> pod trunk push WorkflowTesting.podspec
bundle <span class="nb">exec</span> pod trunk push WorkflowUI.podspec
</code></pre></div>
</td></tr></table></p>
</li>
<li>
<p>Bump the version</p>
</li>
<li><strong>Kotlin:</strong> Update the <code>VERSION_NAME</code> property in <code>kotlin/gradle.properties</code> to the new
     snapshot version, e.g. <code>VERSION_NAME=0.2.0-SNAPSHOT</code>.</li>
<li>
<p><strong>Swift:</strong> Update <code>s.version</code> in <code>*.podspec</code> to the new version, e.g. <code>0.2.0</code>.</p>
</li>
<li>
<p>Commit the new snapshot version:
   <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>git commit -am &quot;Finish releasing v0.1.0.&quot;
</code></pre></div>
</td></tr></table></p>
</li>
<li>
<p>Push your commits and tag:
   <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>git push origin master
# or git push origin fix-branch
git push origin v0.1.0
</code></pre></div>
</td></tr></table></p>
</li>
<li>
<p>Create the release on GitHub:</p>
</li>
<li>Go to the <a href="https://github.com/square/workflow/releases">Releases</a> page for the GitHub
      project.</li>
<li>Click &ldquo;Draft a new release&rdquo;.</li>
<li>Enter the tag name you just pushed.</li>
<li>Title the release with the same name as the tag.</li>
<li>Copy &amp; paste the changelog entry for this release into the description.</li>
<li>If this is a pre-release version, check the pre-release box.</li>
<li>
<p>Hit &ldquo;Publish release&rdquo;.</p>
</li>
<li>
<p>If this was a fix release, merge changes to the master branch:
   <table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>git checkout master
git pull
git merge --no-ff v0.1-fixes
<span class="c1"># Resolve conflicts. Accept master&#39;s versions of gradle.properties and podspecs.</span>
git push origin master
</code></pre></div>
</td></tr></table></p>
</li>
<li>
<p>Publish the website. See below.</p>
</li>
</ol>
<h2 id="deploying-the-documentation-website">Deploying the documentation website<a class="headerlink" href="#deploying-the-documentation-website" title="Permanent link">&para;</a></h2>
<p>Official Workflow documentation lives at <a href="https://squareup.github.io/workflow">https://squareup.github.io/workflow</a>. The website content
consists of three parts:</p>
<ol>
<li>Markdown documentation: Lives in the <code>docs/</code> folder, and consists of a set of hand-written
   Markdown files that document high-level concepts. The static site generator
   <a href="https://www.mkdocs.org/">mkdocs</a> (with <a href="https://squidfunk.github.io/mkdocs-material/">Material</a>
   theming) is used to convert the Markdown to static, styled HTML.</li>
<li>Kotlin API reference: Kdoc embedded in Kotlin source files is converted to GitHub-flavored
   Markdown by Dokka and then included in the statically-generated website.</li>
<li>Swift API reference: Markup comments from Swift files are converted Markdown by
   <a href="https://github.com/eneko/SourceDocs">Sourcedocs</a> and then included in the statically-generated
   website.</li>
</ol>
<p><strong>Note: The documentation site is automatically built and deployed whenever a version tag is pushed.
You only need these steps if you want to work on the site locally.</strong></p>
<h3 id="setting-up-the-site-generators">Setting up the site generators<a class="headerlink" href="#setting-up-the-site-generators" title="Permanent link">&para;</a></h3>
<p>If you&rsquo;ve already done this, you can skip to <em>Deploying the website to production</em> below.</p>
<h4 id="kotlin-dokka">Kotlin: Dokka<a class="headerlink" href="#kotlin-dokka" title="Permanent link">&para;</a></h4>
<p>Dokka runs as a Gradle plugin, so you need to be able to build the Kotlin source with Gradle, but
that&rsquo;s it. To generate the docs manually, run:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">cd</span> kotlin
./gradlew dokka
</code></pre></div>
</td></tr></table>

<h4 id="swift-sourcedocs">Swift: Sourcedocs<a class="headerlink" href="#swift-sourcedocs" title="Permanent link">&para;</a></h4>
<p>Sourcedocs generates a Markdown site from Swift files. You need Ruby, rubygems,
bundler (2.x), Xcode 10.2+, CocoaPods, and of course Sourcedocs itself, to run it. Assuming you&rsquo;ve
already got Xcode, Ruby, and rubygems set up, install the rest of the dependencies:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>gem install bundler cocoapods
brew install sourcedocs
</code></pre></div>
</td></tr></table>

<p>If that succeeded, you need to generate an Xcode project before running Sourcedocs:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">cd</span> swift/Samples/SampleApp/
bundle <span class="nb">exec</span> pod install
<span class="c1"># If this is your first time running CocoaPods, that will fail and you&#39;ll need to run this instead:</span>
<span class="c1">#bundle exec pod install --repo-update</span>
</code></pre></div>
</td></tr></table>

<p>You can manually generate the docs to verify everything is working correctly by running:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1">#cd swift/Samples/SampleApp/</span>
sourcedocs generate -- -scheme Workflow -workspace SampleApp.xcworkspace
sourcedocs generate -- -scheme WorkflowUI -workspace SampleApp.xcworkspace
sourcedocs generate -- -scheme WorkflowTesting -workspace SampleApp.xcworkspace
</code></pre></div>
</td></tr></table>

<p>Note that currently sourcedocs only supports Xcode 10, if you run it with Xcode 11 you might see
an error about Catalyst and only empty READMEs will get generated.</p>
<h4 id="mkdocs">mkdocs<a class="headerlink" href="#mkdocs" title="Permanent link">&para;</a></h4>
<p>Mkdocs is written in Python, so you&rsquo;ll need Python and pip in order to run it. Assuming those are
set up, run:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>pip install mkdocs mkdocs-material mkdocs-redirects
</code></pre></div>
</td></tr></table>

<p>Generate the site manually with:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>mkdocs build
</code></pre></div>
</td></tr></table>

<p>While you&rsquo;re working on the documentation files, you can run the site locally with:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>mkdocs serve
</code></pre></div>
</td></tr></table>

<h3 id="deploying-the-website-to-production">Deploying the website to production<a class="headerlink" href="#deploying-the-website-to-production" title="Permanent link">&para;</a></h3>
<p><strong>Note: The documentation site is automatically built and deployed by a Github Workflow whenever a
version tag is pushed. You only need these steps if you want to publish the site manually.</strong></p>
<p>Before deploying the website for real, you need to export our Google Analytics key in an environment
variable so that it will get added to the HTML. Get the key from one of the project maintainers,
then add the following to your <code>.bashrc</code> and re-source it:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">export</span> <span class="nv">WORKFLOW_GOOGLE_ANALYTICS_KEY</span><span class="o">=</span>UA-__________-1
</code></pre></div>
</td></tr></table>

<p>Now you&rsquo;re ready to publish the site! Just choose a tag or SHA to deploy from, and run:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>./deploy_website.sh TAG_OR_SHA
<span class="c1"># For example:</span>
<span class="c1">#./deploy_website.sh v0.18.0</span>
</code></pre></div>
</td></tr></table>

<p>This will clone the repo to a temporary directory, checkout the right SHA, build Kotlin and Swift
API docs, generate HTML, and push the newly-generated content to the <code>gh-pages</code> branch on GitHub.</p>
<h3 id="validating-markdown">Validating Markdown<a class="headerlink" href="#validating-markdown" title="Permanent link">&para;</a></h3>
<p>Since all of our high-level documentation is written in Markdown, we run a linter in CI to ensure
we use consistent formatting. Lint errors will fail your PR builds, so to run locally, install
<a href="https://github.com/markdownlint/markdownlint">markdownlint</a>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>gem install mdl
</code></pre></div>
</td></tr></table>

<p>Run the linter using the <code>lint_docs.sh</code>:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>./lint_docs.sh
</code></pre></div>
</td></tr></table>

<p>Rules can be configured by editing <code>.markdownlint.rb</code>.</p>
<hr />
<h2 id="kotlin-notes">Kotlin Notes<a class="headerlink" href="#kotlin-notes" title="Permanent link">&para;</a></h2>
<h3 id="development">Development<a class="headerlink" href="#development" title="Permanent link">&para;</a></h3>
<p>To build and install the current version to your local Maven repository (<code>~/.m2</code>), run:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>./gradlew clean installArchives
</code></pre></div>
</td></tr></table>

<h3 id="deploying">Deploying<a class="headerlink" href="#deploying" title="Permanent link">&para;</a></h3>
<h4 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h4>
<p>In order to deploy artifacts to a Maven repository, you&rsquo;ll need to set 4 properties in your private
Gradle properties file (<code>~/.gradle/gradle.properties</code>):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>RELEASE_REPOSITORY_URL=&lt;url of release repository&gt;
SNAPSHOT_REPOSITORY_URL=&lt;url of snapshot repository
SONATYPE_NEXUS_USERNAME=&lt;username&gt;
SONATYPE_NEXUS_PASSWORD=&lt;password&gt;
</code></pre></div>
</td></tr></table>

<h4 id="snapshot-releases">Snapshot Releases<a class="headerlink" href="#snapshot-releases" title="Permanent link">&para;</a></h4>
<p>Double-check that <code>gradle.properties</code> correctly contains the <code>-SNAPSHOT</code> suffix, then upload
snapshot artifacts to Sonatype just like you would for a production release:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>./gradlew clean build <span class="o">&amp;&amp;</span> ./gradlew uploadArchives --no-parallel --no-daemon
</code></pre></div>
</td></tr></table>

<p>You can verify the artifacts are available by visiting
<a href="https://oss.sonatype.org/content/repositories/snapshots/com/squareup/workflow/">https://oss.sonatype.org/content/repositories/snapshots/com/squareup/workflow/</a>.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Square, Inc.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://square.github.io/" target="_blank" rel="noopener" title="globe" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/square" target="_blank" rel="noopener" title="github-alt" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/squareeng" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/joinsquare/" target="_blank" rel="noopener" title="linkedin" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
    
  </body>
</html>